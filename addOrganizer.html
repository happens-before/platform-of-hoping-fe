<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="js/jquery-2.1.0.js"></script>
    <script src="layui/layui.js" charset="utf-8"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <title>添加组织信息</title>
</head>
<body>
<div class="layui-layout layui-layout-admin">
    <!--头部导航-->
    <div id="page1" class="layui-header"></div>
    <div id="main" style="margin-left: 140px;width: 1000px;background: aliceblue;margin-top: 40px;">
        <div class="form-horizontal">
            <div class="form-group">
                <label for="organizerCity" class="col-sm-2 control-label">城市名称</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="organizerCity" placeholder="组织所在城市名称">
                </div>
            </div>
            <div class="form-group">
                <label for="organizerName" class="col-sm-2 control-label">组织名称</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="organizerName" placeholder="组织名称">
                </div>
            </div>

            <div class="form-group">
                <label for="organizerAddress" class="col-sm-2 control-label">组织地址</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="organizerAddress" placeholder="组织地址">
                </div>
            </div>

            <div class="form-group">
                <label for="organizerDescription" class="col-sm-2 control-label">组织描述</label>
                <div class="col-sm-10">
                    <textarea rows="12" class="form-control" id="organizerDescription" placeholder="组织描述"></textarea>
                </div>
            </div>

            <div class="form-group">
                <label for="organizerPrincipal" class="col-sm-2 control-label">负责人姓名</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="organizerPrincipal" placeholder="负责人姓名">
                </div>
            </div>

            <div class="form-group">
                <label for="organizerPhone" class="col-sm-2 control-label">联系方式</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="organizerPhone" placeholder="联系方式">
                </div>
            </div>

            <div class="form-group">
                <label for="password" class="col-sm-2 control-label">密码</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="password" placeholder="密码（6-20位字母或数字）">
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" style="margin-left: 700px;" class="btn btn-info" onclick="addOrganizer()">
                        添加
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function addOrganizer() {
        var sendData = {
            "organizerCity": $("#organizerCity").val(),
            "organizerName": $("#organizerName").val(),
            "organizerPhone": $("#organizerPhone").val(),
            "organizerDescription": $("#organizerDescription").val(),
            "organizerPrincipal": $("#organizerPrincipal").val(),
            "organizerAddress": $("#organizerAddress").val(),
            "password": $("#password").val()
        };
        console.log(sendData)
        $.ajax({
            xhrFields: {
                withCredentials: true
            },
            type: "post",
            dataType: "json",
            url: "http://localhost:8080/organizer/register",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(sendData),
            success: function (data) {
                console.log(data.message)
                if (data.message == "操作成功") {
                    alert("组织添加成功")
                    window.location.href = "organizer.html"
                } else {
                    alert(data.message)
                }
            },
            error: function (e) {
                console.log(e);
                console.log("失败");
                alert(e.message)

            },
        });
    }
</script>
<script>$("#page1").load("navHeader.html");</script>
</body>
</html>