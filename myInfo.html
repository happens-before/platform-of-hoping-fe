<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/search.css">
    <link rel="stylesheet" href="layui/css/layui.css">
    <script type="text/javascript" src="js/template.js"></script>
</head>
<body>
<div class="layui-layout layui-layout-admin">
    <div id="page1" class="layui-header"></div>

    <form class="form-horizontal">
        <!--<div class="form-group" >-->
        <!--<label for="userId" class="col-sm-2 control-label">userId</label>-->
        <!--<div class="col-sm-10">-->
        <!--<input type="text" class="form-control" id="userId" placeholder="Email" value={{e.data.userId}} >-->
        <!--</div>-->
        <!--</div>-->
        <div class="form-group">
            <label for="school" class="col-sm-2 control-label">学校名称</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="school" placeholder="学校名称" readonly="readonly"
                       value={{e.data.school}}>
            </div>
        </div>
        <div class="form-group">
            <label for="college" class="col-sm-2 control-label">学院名称</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="college" placeholder="所在学院名称" readonly="readonly"
                       value={{e.data.college}}>
            </div>
        </div>
        <div class="form-group">
            <label for="profession" class="col-sm-2 control-label">专业名称</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="profession" placeholder="所在专业名称" readonly="readonly"
                       value={{e.data.profession}}>
            </div>
        </div>
        <div class="form-group">
            <label for="community" class="col-sm-2 control-label">社团名称</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="community" placeholder="所在社团名称" readonly="readonly"
                       value={{e.data.community}}>
            </div>
        </div>

        <div class="form-group">
            <label for="userSno" class="col-sm-2 control-label">学号信息</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="userSno" placeholder="学号信息" readonly="readonly"
                       value={{e.data.userSno}}>
            </div>
        </div>
        <div class="form-group">
            <label for="userName" class="col-sm-2 control-label">姓名</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="userName" placeholder="姓名" readonly="readonly"
                       value={{e.data.userName}}>
            </div>
        </div>

        <div class="form-group">
            <label for="age" class="col-sm-2 control-label">年龄</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="age" placeholder="年龄" readonly="readonly"
                       value={{e.data.age}}>
            </div>
        </div>

        <div class="form-group">
            <label for="email" class="col-sm-2 control-label">电子邮件</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="email" placeholder="电子邮件" readonly="readonly"
                       value={{e.data.school}}>
            </div>
        </div>
        <div class="form-group">
            <label for="phone" class="col-sm-2 control-label">电话号码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="phone" placeholder="电话号码" readonly="readonly"
                       value={{e.data.phone}}>
            </div>
        </div>

        <div class="form-group">
            <label for="sex" class="col-sm-2 control-label">性别</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="sex"  readonly="readonly"
                       value={{e.data.sex}}>
            </div>
        </div>

    </form>
</div>
<script>
    // 获取cookie信息
    function getCookie(cookieName) {
        console.log(document.cookie);
        var arr, reg = new RegExp("(^| )" + cookieName + "=([^;]*)(;|$)");
        if (arr = document.cookie.match(reg))
            return decodeURI(arr[2]);
        else
            return null;
    }

    window.onload = function userInfo() {

        var userId = getCookie("platform_userId");
        console.log(userId)
        $.ajax({
            xhrFields: {
                withCredentials: true
            },
            url: "http://localhost:8080/user/info", //访问路径
            type: "get",
            data: {
                "userId": userId
            },
            dataType: "json",
            success: function (e) {
                console.log(e)
                $("#userId").val(e.data.userId);
                $("#school").val(e.data.school);
                $("#college").val(e.data.college);
                $("#profession").val(e.data.profession);
                $("#userSno").val(e.data.userSno);
                $("#community").val(e.data.community);
                $("#userName").val(e.data.userName);
                $("#sex").val(e.data.sex);
                $("#age").val(e.data.age);
                $("#email").val(e.data.email);
                $("#phone").val(e.data.phone);
            },
            error: function (e) {
                console.log(e);
                console.log("失败");
            },
        });
    }
</script>
<script>
    $("#page1").load("navHeader.html");
</script>
</body>

</html>